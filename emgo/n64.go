// Copyright 2024 The Embedded Go Authors. All rights reserved.
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.

package main

import (
	"bytes"
	"encoding/binary"
	"os"
)

// https://n64brew.dev/wiki/ROM_Header
var n64Header = [0x40]byte{
	0x00: 0x80, 0x37, 0x12, 0x40, // PI BSD DOM1 Configuration Flags
	0x04: 0x00, 0x00, 0x00, 0x0f, // Clock Rate
	0x08: 0x80, 0x00, 0x04, 0x00, // Boot Address
	0x0c: 0x00, 0x00, 0x14, 0x44, // Libultra Version
	//0x10: Check Code (8 bytes)
	//0x18: Reserved (8 bytes)
	//0x20: Game Title (20 bytes)
	//0x34: Reserved (7 bytes)
	0x3b: 'N',      // Category Code ('N' = 0x4e = "Game Pak"),
	0x3c: ' ', ' ', // Unique Code
	0x3e: ' ', // Destination Code
	0x3f: 0,   // ROM Version
}

const n64ChecksumLen = 1024 * 1024

// n64CRC is a loose translation to Go of the calculate_crc function from
// the n64chain:
//
// https://github.com/tj90241/n64chain
//
// The original copyright notes from the tools/checksum.c file:
//
// n64chain: A (free) open-source N64 development toolchain.
// Copyright 2014 Tyler J. Stachecki <tstache1@binghamton.edu>
//
// This file is more or less a direct rip of chksum64:
// Copyright 1997 Andreas Sterbenz <stan@sbox.tu-graz.ac.at>
func n64CRC(buf []byte) (crc [2]uint32) {
	const CIC_NUS6102_SEED uint32 = 0xF8CA4DDC
	t1 := CIC_NUS6102_SEED
	t2 := CIC_NUS6102_SEED
	t3 := CIC_NUS6102_SEED
	t4 := CIC_NUS6102_SEED
	t5 := CIC_NUS6102_SEED
	t6 := CIC_NUS6102_SEED

	for i := 0; i < len(buf); i += 4 {
		c1 := binary.BigEndian.Uint32(buf[i:])
		k1 := t6 + c1
		if k1 < t6 {
			t4++
		}
		t6 = k1
		t3 ^= c1
		k2 := c1 & 0x1F
		k1 = c1<<k2 | c1>>(32-k2)
		t5 += k1
		if c1 < t2 {
			t2 ^= k1
		} else {
			t2 ^= t6 ^ c1
		}
		t1 += c1 ^ t5
	}

	crc[0] = t6 ^ t4 ^ t3
	crc[1] = t5 ^ t2 ^ t1
	return
}

func n64WriteROMFile(obj, format string, buf *bytes.Buffer) {
	pad := n64ChecksumLen - buf.Len()
	if pad > 0 {
		buf.Write(padBytes(&ones, pad, 0xff))
	}
	crc := n64CRC(buf.Bytes()[:n64ChecksumLen])
	binary.BigEndian.PutUint32(n64Header[0x10:], crc[0])
	binary.BigEndian.PutUint32(n64Header[0x14:], crc[1])
	copy(n64Header[0x20:0x34], obj) // Game Title
	rom := make([]byte, 0, len(n64Header)+len(n64IPL3)+buf.Len())
	rom = append(rom, n64Header[:]...)
	rom = append(rom, n64IPL3...)
	rom = append(rom, buf.Bytes()...)

	if format == "uf2" {
		n64WriteUF2(obj, rom)
	} else {
		dieErr(os.WriteFile(obj+".z64", rom, 0644))
	}
}

// n64WriteUF2 is a translation to Go of the generateAndSaveUF2 function from
// https://kbeckmann.github.io/PicoCart64/js/PicoCart64.js
// Original author: Konrad Beckmann.
func n64WriteUF2(obj string, rom []byte) {
	const (
		chunkSize = 1024
		header    = "picocartcompress"
		_1M       = 1024 * 1024
	)

	// Split ROM into chunks

	var (
		chunkData   []byte
		chunkMap    [(0x8000 - len(header)) / 2]uint16
		chunkMapLen int
	)

	for i := 0; i < len(rom); i += chunkSize {
		k := min(len(rom), i+chunkSize)
		chunk := rom[i:k]

		// Check if chunk is in chunkData
		for k = 0; k < len(chunkData); k += chunkSize {
			if bytes.HasPrefix(chunkData[k:], chunk) {
				break
			}
		}
		if k == len(chunkData) {
			// Found a unique chunk
			chunkData = append(chunkData, chunk...)
		}
		if chunkMapLen >= len(chunkMap) {
			die("n64 uf2: chunk map overflow")
		}
		k /= chunkSize // chunk number in chunkData
		chunkMap[chunkMapLen] = uint16(k)
		chunkMapLen++
		//fmt.Printf("%d -> %d\n", i, k)
	}

	newSize := len(header) + len(chunkMap)*2 + len(chunkData)
	flashStart := 0x10000000
	lastAddr := 0x10030000 + newSize
	flashEnd := flashStart + 2*_1M
	//fmt.Printf("Full ROM size:   %10d bytes\n", len(rom))
	//fmt.Printf("Header + Chunks: %10d bytes\n", newSize)
	//fmt.Printf("Ratio:           %10d %%\n", newSize*100/len(rom))
	//fmt.Printf("Address of last byte: %#x /  %#x\n", lastAddr, flashEnd)
	if lastAddr > flashEnd {
		warn(
			"n64 uf2: the compressed ROM requires %d MiB of Flash (> 2 MiB)\n",
			(lastAddr-flashStart+_1M-1)/_1M,
		)
	}

	// Save compressed ROM

	f, err := os.Create(obj + ".uf2")
	dieErr(err)
	defer f.Close()


	w := NewUF2Writer(f, 0x10030000, UF2FamilyIDPresent, uf2_rp2040, newSize)
	_, err = w.WriteString(header)
	dieErr(err)
	dieErr(binary.Write(w, binary.LittleEndian, chunkMap))
	_, err = w.Write(chunkData)
	dieErr(err)
	dieErr(w.Flush())
}

/*
func main() {
	buf, err := os.ReadFile("test_file.z64")
	if err != nil {
		fmt.Println(err)
		return
	}
	buf = buf[0x1000:]
	buf = buf[:n64ChecksumLen]
	crc := n64CRC(buf)
	fmt.Printf("%x %x\n", crc[0], crc[1])
}
*/

// 6102/7101 MD5=e24dd796b2fa16511521139d28c8356b
const n64IPL3 = "" +
	"\x40\x80\x68\x00\x40\x80\x48\x00\x40\x80\x58\x00\x3c\x08\xa4\x70" +
	"\x25\x08\x00\x00\x8d\x09\x00\x0c\x15\x20\x00\xed\x00\x00\x00\x00" +
	"\x27\xbd\xff\xe8\xaf\xb3\x00\x00\xaf\xb4\x00\x04\xaf\xb5\x00\x08" +
	"\xaf\xb6\x00\x0c\xaf\xb7\x00\x10\x3c\x08\xa4\x70\x25\x08\x00\x00" +
	"\x3c\x0a\xa3\xf8\x3c\x0b\xa3\xf0\x3c\x0c\xa4\x30\x25\x8c\x00\x00" +
	"\x34\x09\x00\x40\xad\x09\x00\x04\x24\x11\x1f\x40\x00\x00\x00\x00" +
	"\x22\x31\xff\xff\x16\x20\xff\xfd\x00\x00\x00\x00\xad\x00\x00\x08" +
	"\x34\x09\x00\x14\xad\x09\x00\x0c\xad\x00\x00\x00\x24\x11\x00\x04" +
	"\x00\x00\x00\x00\x22\x31\xff\xff\x16\x20\xff\xfd\x00\x00\x00\x00" +
	"\x34\x09\x00\x0e\xad\x09\x00\x00\x24\x11\x00\x20\x22\x31\xff\xff" +
	"\x16\x20\xff\xfe\x34\x09\x01\x0f\xad\x89\x00\x00\x3c\x09\x18\x08" +
	"\x35\x29\x28\x38\xad\x49\x00\x08\xad\x40\x00\x14\x3c\x09\x80\x00" +
	"\xad\x49\x00\x04\x00\x00\x68\x25\x00\x00\x70\x25\x3c\x0f\xa3\xf0" +
	"\x00\x00\xc0\x25\x3c\x19\xa3\xf0\x3c\x16\xa0\x00\x00\x00\xb8\x25" +
	"\x3c\x06\xa3\xf0\x3c\x07\xa0\x00\x00\x00\x90\x25\x3c\x14\xa0\x00" +
	"\x27\xbd\xff\xb8\x03\xa0\xf0\x25\x3c\x10\xa4\x30\x8e\x10\x00\x04" +
	"\x3c\x11\x01\x01\x26\x31\x01\x01\x16\x11\x00\x05\x00\x00\x00\x00" +
	"\x24\x10\x02\x00\x35\x71\x40\x00\x10\x00\x00\x03\x00\x00\x00\x00" +
	"\x24\x10\x04\x00\x35\x71\x80\x00\xae\x2e\x00\x04\x25\xf5\x00\x0c" +
	"\x0d\x00\x01\xde\x00\x00\x00\x00\x10\x40\x00\x38\x00\x00\x00\x00" +
	"\xaf\xa2\x00\x00\x24\x09\x20\x00\xad\x89\x00\x00\x8d\xeb\x00\x00" +
	"\x3c\x08\xf0\xff\x01\x68\x58\x24\xaf\xab\x00\x04\x23\xbd\x00\x08" +
	"\x24\x09\x10\x00\xad\x89\x00\x00\x3c\x08\xb0\x19\x15\x68\x00\x0c" +
	"\x00\x00\x00\x00\x3c\x08\x08\x00\x03\x08\xc0\x20\x03\x30\xc8\x20" +
	"\x03\x30\xc8\x20\x3c\x08\x00\x20\x02\xc8\xb0\x20\x02\x88\xa0\x20" +
	"\x00\x12\x90\x40\x22\x52\x00\x01\x10\x00\x00\x03\x00\x00\x00\x00" +
	"\x3c\x08\x00\x10\x02\x88\xa0\x20\x24\x08\x20\x00\xad\x88\x00\x00" +
	"\x8d\xe9\x00\x24\x8d\xfa\x00\x00\x24\x08\x10\x00\xad\x88\x00\x00" +
	"\x31\x29\xff\xff\x24\x08\x05\x00\x15\x28\x00\x09\x00\x00\x00\x00" +
	"\x3c\x1b\x01\x00\x03\x5b\xd0\x24\x17\x40\x00\x05\x00\x00\x00\x00" +
	"\x3c\x08\x10\x1c\x35\x08\x0a\x04\xad\xe8\x00\x18\x10\x00\x00\x03" +
	"\x3c\x08\x08\x0c\x35\x08\x12\x04\xad\xe8\x00\x18\x3c\x08\x08\x00" +
	"\x01\xc8\x70\x20\x01\xf0\x78\x20\x01\xf0\x78\x20\x25\xad\x00\x01" +
	"\x2d\xa8\x00\x08\x15\x00\xff\xc4\x00\x00\x00\x00\x3c\x08\xc4\x00" +
	"\xad\x48\x00\x0c\x3c\x08\x80\x00\xad\x48\x00\x04\x03\xc0\xe8\x25" +
	"\x00\x00\x18\x25\x8f\xa9\x00\x04\x3c\x08\xb0\x09\x15\x28\x00\x16" +
	"\x00\x00\x00\x00\xae\x38\x00\x04\x27\x35\x00\x0c\x8f\xa4\x00\x00" +
	"\x23\xbd\x00\x08\x24\x05\x00\x01\x0d\x00\x02\x90\x00\x00\x00\x00" +
	"\x8e\xc8\x00\x00\x3c\x08\x00\x08\x01\x16\x40\x20\x8d\x09\x00\x00" +
	"\x8e\xc8\x00\x00\x3c\x08\x00\x08\x01\x16\x40\x20\x8d\x09\x00\x00" +
	"\x3c\x08\x04\x00\x01\xc8\x70\x20\x03\x30\xc8\x20\x3c\x08\x00\x10" +
	"\x02\xc8\xb0\x20\x10\x00\x00\x21\xae\x37\x00\x04\x24\xd5\x00\x0c" +
	"\x8f\xa4\x00\x00\x23\xbd\x00\x08\x24\x05\x00\x01\x0d\x00\x02\x90" +
	"\x00\x00\x00\x00\x8c\xe8\x00\x00\x3c\x08\x00\x08\x01\x07\x40\x20" +
	"\x8d\x09\x00\x00\x3c\x08\x00\x10\x01\x07\x40\x20\x8d\x09\x00\x00" +
	"\x3c\x08\x00\x18\x01\x07\x40\x20\x8d\x09\x00\x00\x8c\xe8\x00\x00" +
	"\x3c\x08\x00\x08\x01\x07\x40\x20\x8d\x09\x00\x00\x3c\x08\x00\x10" +
	"\x01\x07\x40\x20\x8d\x09\x00\x00\x3c\x08\x00\x18\x01\x07\x40\x20" +
	"\x8d\x09\x00\x00\x3c\x08\x08\x00\x02\xe8\xb8\x20\x00\xd0\x30\x20" +
	"\x00\xd0\x30\x20\x3c\x08\x00\x20\x00\xe8\x38\x20\x24\x63\x00\x01" +
	"\x00\x6d\x40\x2a\x15\x00\xff\xc3\x00\x00\x00\x00\x3c\x0a\xa4\x70" +
	"\x00\x12\x94\xc0\x3c\x09\x00\x06\x35\x29\x36\x34\x01\x32\x48\x25" +
	"\xad\x49\x00\x10\x8d\x49\x00\x10\x3c\x08\xa0\x00\x35\x08\x03\x00" +
	"\x3c\x09\x0f\xff\x35\x29\xff\xff\x02\xc9\xb0\x24\xad\x16\x00\x18" +
	"\x03\xc0\xe8\x25\x27\xbd\x00\x48\x8f\xb3\x00\x00\x8f\xb4\x00\x04" +
	"\x8f\xb5\x00\x08\x8f\xb6\x00\x0c\x8f\xb7\x00\x10\x27\xbd\x00\x18" +
	"\x3c\x08\x80\x00\x25\x08\x00\x00\x25\x09\x40\x00\x25\x29\xff\xe0" +
	"\x40\x80\xe0\x00\x40\x80\xe8\x00\xbd\x08\x00\x00\x01\x09\x08\x2b" +
	"\x14\x20\xff\xfd\x25\x08\x00\x20\x3c\x08\x80\x00\x25\x08\x00\x00" +
	"\x25\x09\x20\x00\x25\x29\xff\xf0\xbd\x09\x00\x00\x01\x09\x08\x2b" +
	"\x14\x20\xff\xfd\x25\x08\x00\x10\x10\x00\x00\x13\x00\x00\x00\x00" +
	"\x3c\x08\x80\x00\x25\x08\x00\x00\x25\x09\x40\x00\x25\x29\xff\xe0" +
	"\x40\x80\xe0\x00\x40\x80\xe8\x00\xbd\x08\x00\x00\x01\x09\x08\x2b" +
	"\x14\x20\xff\xfd\x25\x08\x00\x20\x3c\x08\x80\x00\x25\x08\x00\x00" +
	"\x25\x09\x20\x00\x25\x29\xff\xf0\xbd\x01\x00\x00\x01\x09\x08\x2b" +
	"\x14\x20\xff\xfd\x25\x08\x00\x10\x3c\x0a\xa4\x00\x25\x4a\x00\x00" +
	"\x3c\x0b\xff\xf0\x3c\x09\x00\x10\x01\x4b\x50\x24\x3c\x08\xa4\x00" +
	"\x25\x29\xff\xff\x3c\x0b\xa4\x00\x25\x08\x04\xc0\x25\x6b\x07\x74" +
	"\x01\x09\x40\x24\x01\x69\x58\x24\x3c\x09\xa0\x00\x01\x0a\x40\x25" +
	"\x01\x6a\x58\x25\x25\x29\x00\x00\x8d\x0d\x00\x00\x25\x08\x00\x04" +
	"\x01\x0b\x08\x2b\x25\x29\x00\x04\x14\x20\xff\xfb\xad\x2d\xff\xfc" +
	"\x3c\x0c\x80\x00\x25\x8c\x00\x00\x01\x80\x00\x08\x00\x00\x00\x00" +
	"\x3c\x0b\xb0\x00\x8d\x69\x00\x08\x3c\x0a\x1f\xff\x35\x4a\xff\xff" +
	"\x3c\x01\xa4\x60\x01\x2a\x48\x24\xac\x29\x00\x00\x3c\x08\xa4\x60" +
	"\x8d\x08\x00\x10\x31\x08\x00\x02\x55\x00\xff\xfd\x3c\x08\xa4\x60" +
	"\x24\x08\x10\x00\x01\x0b\x40\x20\x01\x0a\x40\x24\x3c\x01\xa4\x60" +
	"\xac\x28\x00\x04\x3c\x0a\x00\x10\x25\x4a\xff\xff\x3c\x01\xa4\x60" +
	"\xac\x2a\x00\x0c\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" +
	"\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" +
	"\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" +
	"\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" +
	"\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" +
	"\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" +
	"\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" +
	"\x00\x00\x00\x00\x3c\x0b\xa4\x60\x8d\x6b\x00\x10\x31\x6b\x00\x01" +
	"\x15\x60\xff\xe0\x00\x00\x00\x00\x3c\x0b\xb0\x00\x8d\x64\x00\x08" +
	"\x02\xc0\x28\x25\x3c\x01\x5d\x58\x34\x21\x8b\x65\x00\xa1\x00\x19" +
	"\x27\xbd\xff\xe0\xaf\xbf\x00\x1c\xaf\xb0\x00\x14\x3c\x1f\x00\x10" +
	"\x00\x00\x18\x25\x00\x00\x40\x25\x00\x80\x48\x25\x24\x0d\x00\x20" +
	"\x00\x00\x10\x12\x24\x42\x00\x01\x00\x40\x38\x25\x00\x40\x50\x25" +
	"\x00\x40\x58\x25\x00\x40\x80\x25\x00\x40\x30\x25\x00\x40\x60\x25" +
	"\x8d\x22\x00\x00\x00\xe2\x18\x21\x00\x67\x08\x2b\x10\x20\x00\x02" +
	"\x00\x60\x28\x25\x25\x4a\x00\x01\x30\x43\x00\x1f\x01\xa3\x78\x23" +
	"\x01\xe2\xc0\x06\x00\x62\x70\x04\x01\xd8\x20\x25\x00\xc2\x08\x2b" +
	"\x00\xa0\x38\x25\x01\x62\x58\x26\x10\x20\x00\x04\x02\x04\x80\x21" +
	"\x00\xe2\xc8\x26\x10\x00\x00\x02\x03\x26\x30\x26\x00\xc4\x30\x26" +
	"\x25\x08\x00\x04\x00\x50\x78\x26\x25\x29\x00\x04\x15\x1f\xff\xe8" +
	"\x01\xec\x60\x21\x00\xea\x70\x26\x01\xcb\x38\x26\x02\x06\xc0\x26" +
	"\x03\x0c\x80\x26\x3c\x0b\xb0\x00\x8d\x68\x00\x10\x14\xe8\x00\x06" +
	"\x00\x00\x00\x00\x8d\x68\x00\x14\x16\x08\x00\x03\x00\x00\x00\x00" +
	"\x04\x11\x00\x03\x00\x00\x00\x00\x04\x11\xff\xff\x00\x00\x00\x00" +
	"\x3c\x09\xa4\x08\x8d\x29\x00\x00\x8f\xb0\x00\x14\x8f\xbf\x00\x1c" +
	"\x11\x20\x00\x06\x27\xbd\x00\x20\x24\x0a\x00\x41\x3c\x01\xa4\x04" +
	"\xac\x2a\x00\x10\x3c\x01\xa4\x08\xac\x20\x00\x00\x3c\x0b\x00\xaa" +
	"\x35\x6b\xaa\xae\x3c\x01\xa4\x04\xac\x2b\x00\x10\x3c\x01\xa4\x30" +
	"\x24\x08\x05\x55\xac\x28\x00\x0c\x3c\x01\xa4\x80\xac\x20\x00\x18" +
	"\x3c\x01\xa4\x50\xac\x20\x00\x0c\x3c\x01\xa4\x30\x24\x09\x08\x00" +
	"\xac\x29\x00\x00\x24\x09\x00\x02\x3c\x01\xa4\x60\x3c\x08\xa0\x00" +
	"\x35\x08\x03\x00\xac\x29\x00\x10\xad\x17\x00\x14\xad\x15\x00\x0c" +
	"\xad\x13\x00\x04\x12\x60\x00\x04\xad\x14\x00\x00\x3c\x09\xa6\x00" +
	"\x10\x00\x00\x03\x25\x29\x00\x00\x3c\x09\xb0\x00\x25\x29\x00\x00" +
	"\xad\x09\x00\x08\x3c\x08\xa4\x00\x25\x08\x00\x00\x21\x09\x10\x00" +
	"\x25\x08\x00\x04\x15\x09\xff\xfe\xad\x00\xff\xfc\x3c\x08\xa4\x00" +
	"\x25\x08\x10\x00\x21\x09\x10\x00\x25\x08\x00\x04\x15\x09\xff\xfe" +
	"\xad\x00\xff\xfc\x3c\x0b\xb0\x00\x8d\x69\x00\x08\x01\x20\x00\x08" +
	"\x00\x00\x00\x00\x00\x00\x00\x00\x27\xbd\xff\x60\xaf\xb0\x00\x40" +
	"\xaf\xb1\x00\x44\x00\x00\x88\x25\x00\x00\x80\x25\xaf\xa2\x00\x00" +
	"\xaf\xa3\x00\x04\xaf\xa4\x00\x08\xaf\xa5\x00\x0c\xaf\xa6\x00\x10" +
	"\xaf\xa7\x00\x14\xaf\xa8\x00\x18\xaf\xa9\x00\x1c\xaf\xaa\x00\x20" +
	"\xaf\xab\x00\x24\xaf\xac\x00\x28\xaf\xad\x00\x2c\xaf\xae\x00\x30" +
	"\xaf\xaf\x00\x34\xaf\xb8\x00\x38\xaf\xb9\x00\x3c\xaf\xb2\x00\x48" +
	"\xaf\xb3\x00\x4c\xaf\xb4\x00\x50\xaf\xb5\x00\x54\xaf\xb6\x00\x58" +
	"\xaf\xb7\x00\x5c\xaf\xbe\x00\x60\xaf\xbf\x00\x64\x0d\x00\x02\x20" +
	"\x00\x00\x00\x00\x26\x10\x00\x01\x2a\x09\x00\x04\x15\x20\xff\xfb" +
	"\x02\x22\x88\x21\x00\x11\x20\x82\x0d\x00\x02\x90\x24\x05\x00\x01" +
	"\x8f\xbf\x00\x64\x00\x11\x10\x82\x8f\xb1\x00\x44\x8f\xa3\x00\x04" +
	"\x8f\xa4\x00\x08\x8f\xa5\x00\x0c\x8f\xa6\x00\x10\x8f\xa7\x00\x14" +
	"\x8f\xa8\x00\x18\x8f\xa9\x00\x1c\x8f\xaa\x00\x20\x8f\xab\x00\x24" +
	"\x8f\xac\x00\x28\x8f\xad\x00\x2c\x8f\xae\x00\x30\x8f\xaf\x00\x34" +
	"\x8f\xb8\x00\x38\x8f\xb9\x00\x3c\x8f\xb0\x00\x40\x8f\xb2\x00\x48" +
	"\x8f\xb3\x00\x4c\x8f\xb4\x00\x50\x8f\xb5\x00\x54\x8f\xb6\x00\x58" +
	"\x8f\xb7\x00\x5c\x8f\xbe\x00\x60\x03\xe0\x00\x08\x27\xbd\x00\xa0" +
	"\x27\xbd\xff\xe0\xaf\xbf\x00\x1c\x00\x00\x48\x25\x00\x00\x58\x25" +
	"\x00\x00\x60\x25\x29\x9a\x00\x40\x53\x40\x00\x18\x00\x00\x10\x25" +
	"\x0d\x00\x02\x43\x01\x80\x20\x25\x58\x40\x00\x08\x29\x3a\x00\x50" +
	"\x00\x49\xd0\x23\x03\x4c\x00\x19\x00\x40\x48\x25\x00\x00\xd0\x12" +
	"\x01\x7a\x58\x21\x00\x00\x00\x00\x29\x3a\x00\x50\x17\x40\xff\xf1" +
	"\x25\x8c\x00\x01\x00\x0b\x20\x80\x00\x8b\x20\x23\x00\x04\x20\x80" +
	"\x00\x8b\x20\x23\x00\x04\x20\x40\x0d\x00\x02\x60\x24\x84\xfc\x90" +
	"\x10\x00\x00\x03\x8f\xbf\x00\x1c\x00\x00\x10\x25\x8f\xbf\x00\x1c" +
	"\x27\xbd\x00\x20\x03\xe0\x00\x08\x00\x00\x00\x00\x27\xbd\xff\xd8" +
	"\xaf\xbf\x00\x1c\x00\x00\x10\x25\x0d\x00\x02\x90\x24\x05\x00\x02" +
	"\x00\x00\xf0\x25\x24\x1a\xff\xff\xae\x9a\x00\x04\x8e\x83\x00\x04" +
	"\xae\x9a\x00\x00\xae\x9a\x00\x00\x00\x00\xe0\x25\x00\x03\x1c\x02" +
	"\x30\x7a\x00\x01\x53\x40\x00\x03\x27\x9c\x00\x01\x24\x42\x00\x01" +
	"\x27\x9c\x00\x01\x2b\x9a\x00\x08\x17\x40\xff\xf9\x00\x03\x18\x42" +
	"\x27\xde\x00\x01\x2b\xda\x00\x0a\x57\x40\xff\xef\x24\x1a\xff\xff" +
	"\x8f\xbf\x00\x1c\x27\xbd\x00\x28\x03\xe0\x00\x08\x00\x00\x00\x00" +
	"\x27\xbd\xff\xd8\xaf\xbf\x00\x1c\xaf\xa4\x00\x20\xa3\xa0\x00\x27" +
	"\x00\x00\x40\x25\x00\x00\x50\x25\x34\x0d\xc8\x00\x00\x00\x70\x25" +
	"\x29\xda\x00\x40\x57\x40\x00\x04\x01\xc0\x20\x25\x10\x00\x00\x20" +
	"\x00\x00\x10\x25\x01\xc0\x20\x25\x0d\x00\x02\x90\x24\x05\x00\x01" +
	"\x0d\x00\x02\xb4\x27\xa4\x00\x27\x0d\x00\x02\xb4\x27\xa4\x00\x27" +
	"\x93\xba\x00\x27\x24\x1b\x03\x20\x8f\xa4\x00\x20\x03\x5b\x00\x19" +
	"\x00\x00\x40\x12\x01\x04\xd0\x23\x07\x43\x00\x03\x03\x4d\xd8\x2a" +
	"\x00\x88\xd0\x23\x03\x4d\xd8\x2a\x53\x60\x00\x04\x8f\xa4\x00\x20" +
	"\x03\x40\x68\x25\x01\xc0\x50\x25\x8f\xa4\x00\x20\x01\x04\xd8\x2a" +
	"\x53\x60\x00\x06\x01\x4e\x10\x21\x25\xce\x00\x01\x29\xdb\x00\x41" +
	"\x57\x60\xff\xe0\x29\xda\x00\x40\x01\x4e\x10\x21\x00\x02\x10\x42" +
	"\x8f\xbf\x00\x1c\x27\xbd\x00\x28\x03\xe0\x00\x08\x00\x00\x00\x00" +
	"\x27\xbd\xff\xd8\x30\x84\x00\xff\x24\x1b\x00\x01\x38\x84\x00\x3f" +
	"\xaf\xbf\x00\x1c\x14\xbb\x00\x03\x3c\x0f\x46\x00\x3c\x1a\x80\x00" +
	"\x01\xfa\x78\x25\x30\x9a\x00\x01\x00\x1a\xd1\x80\x01\xfa\x78\x25" +
	"\x30\x9a\x00\x02\x00\x1a\xd3\x40\x01\xfa\x78\x25\x30\x9a\x00\x04" +
	"\x00\x1a\xd5\x00\x01\xfa\x78\x25\x30\x9a\x00\x08\x00\x1a\xd1\x00" +
	"\x01\xfa\x78\x25\x30\x9a\x00\x10\x00\x1a\xd2\xc0\x01\xfa\x78\x25" +
	"\x30\x9a\x00\x20\x00\x1a\xd4\x80\x01\xfa\x78\x25\x24\x1b\x00\x01" +
	"\x14\xbb\x00\x03\xae\xaf\x00\x00\x3c\x1a\xa4\x30\xaf\x40\x00\x00" +
	"\x8f\xbf\x00\x1c\x27\xbd\x00\x28\x03\xe0\x00\x08\x00\x00\x00\x00" +
	"\x27\xbd\xff\xd8\xaf\xbf\x00\x1c\x24\x1a\x20\x00\x3c\x1b\xa4\x30" +
	"\xaf\x7a\x00\x00\x00\x00\xf0\x25\x8e\xbe\x00\x00\x24\x1a\x10\x00" +
	"\xaf\x7a\x00\x00\x24\x1b\x00\x40\x03\x7e\xd8\x24\x00\x1b\xd9\x82" +
	"\x00\x00\xd0\x25\x03\x5b\xd0\x25\x24\x1b\x40\x00\x03\x7e\xd8\x24" +
	"\x00\x1b\xdb\x42\x03\x5b\xd0\x25\x3c\x1b\x00\x40\x03\x7e\xd8\x24" +
	"\x00\x1b\xdd\x02\x03\x5b\xd0\x25\x24\x1b\x00\x80\x03\x7e\xd8\x24" +
	"\x00\x1b\xd9\x02\x03\x5b\xd0\x25\x34\x1b\x80\x00\x03\x7e\xd8\x24" +
	"\x00\x1b\xda\xc2\x03\x5b\xd0\x25\x3c\x1b\x00\x80\x03\x7e\xd8\x24" +
	"\x00\x1b\xdc\x82\x03\x5b\xd0\x25\xa0\x9a\x00\x00\x8f\xbf\x00\x1c" +
	"\x27\xbd\x00\x28\x03\xe0\x00\x08\x00\x00\x00\x00\x00\x00\x00\x00" +
	"\x02\x00\x10\x01\x40\x0a\x00\x88\x04\x40\x22\x02\x08\x10\x41\xff" +
	"\x08\x08\x40\x44\x01\x20\x08\x7f\x02\x04\x10\x10\x80\x84\x04\x20" +
	"\x41\xfe\x08\x08\x40\x22\x01\x10\x08\x80\x44\x04\x3f\xc0\x07\x00" +
	"\xc6\x08\x08\x80\x24\x01\x40\x02\x00\x10\x00\x80\x02\x00\x90\x04" +
	"\x40\x41\x8c\x03\x80\x7e\x02\x0c\x10\x10\x80\x44\x02\x20\x09\x00" +
	"\x48\x02\x40\x12\x01\x10\x08\x80\x84\x18\x3f\x00\x7f\xe2\x00\x10" +
	"\x00\x80\x04\x00\x20\x01\xff\x08\x00\x40\x02\x00\x10\x00\x80\x04" +
	"\x00\x3f\xf0\x7f\xe2\x00\x10\x00\x80\x04\x00\x20\x01\xff\x08\x00" +
	"\x40\x02\x00\x10\x00\x80\x04\x00\x20\x00\x07\x00\xc6\x08\x08\x80" +
	"\x24\x01\x40\x02\x00\x10\x00\x83\xf2\x00\x90\x04\x40\x61\x8d\x03" +
	"\x88\x40\x12\x00\x90\x04\x80\x24\x01\x20\x09\xff\xc8\x02\x40\x12" +
	"\x00\x90\x04\x80\x24\x01\x20\x08\x07\x00\x10\x00\x80\x04\x00\x20" +
	"\x01\x00\x08\x00\x40\x02\x00\x10\x00\x80\x04\x00\x20\x03\x80\x00" +
	"\x40\x02\x00\x10\x00\x80\x04\x00\x20\x01\x00\x08\x00\x42\x02\x10" +
	"\x10\x80\x82\x08\x0f\x80\x40\x22\x02\x10\x20\x82\x04\x20\x22\x01" +
	"\x20\x0a\x80\x62\x02\x08\x10\x20\x80\x84\x02\x20\x08\x40\x02\x00" +
	"\x10\x00\x80\x04\x00\x20\x01\x00\x08\x00\x40\x02\x00\x10\x00\x80" +
	"\x04\x00\x3f\xf0\x80\x0c\x00\x70\x07\x40\x5a\x02\xc8\x26\x41\x31" +
	"\x11\x88\x8c\x28\x61\x43\x04\x18\x20\xc0\x04\x40\x23\x01\x14\x08" +
	"\xa0\x44\x82\x22\x11\x10\x88\x44\x42\x22\x09\x10\x28\x81\x44\x06" +
	"\x20\x10\x0f\x01\x86\x10\x08\x80\x48\x01\x40\x0a\x00\x50\x02\x80" +
	"\x14\x00\x90\x08\x80\x43\x0c\x07\x80\x7f\x82\x02\x10\x08\x80\x44" +
	"\x02\x20\x11\x01\x0f\xf0\x40\x02\x00\x10\x00\x80\x04\x00\x20\x00" +
	"\x0f\x01\x86\x10\x08\x80\x48\x01\x40\x0a\x00\x50\x02\x80\x14\x10" +
	"\x90\x48\x81\x43\x0c\x07\x90\x7f\x82\x02\x10\x08\x80\x44\x02\x20" +
	"\x21\xfe\x08\x20\x40\x82\x04\x10\x10\x80\x84\x02\x20\x10\x1f\x81" +
	"\x02\x10\x08\x80\x44\x00\x10\x00\x70\x00\x70\x00\x40\x01\x10\x08" +
	"\x80\x42\x04\x0f\xc0\x7f\xf0\x10\x00\x80\x04\x00\x20\x01\x00\x08" +
	"\x00\x40\x02\x00\x10\x00\x80\x04\x00\x20\x01\x00\x40\x22\x01\x10" +
	"\x08\x80\x44\x02\x20\x11\x00\x88\x04\x40\x22\x01\x08\x10\x40\x81" +
	"\x08\x07\x80\x40\x12\x00\x88\x08\x40\x42\x02\x08\x20\x41\x01\x10" +
	"\x08\x80\x44\x01\x40\x0a\x00\x20\x01\x00\x82\x0c\x10\x60\x82\x8a" +
	"\x24\x51\x22\x89\x14\x45\x14\x28\xa1\x45\x0a\x28\x20\x81\x04\x08" +
	"\x20\x40\x11\x01\x04\x10\x20\x80\x88\x02\x80\x08\x00\x40\x05\x00" +
	"\x44\x04\x10\x20\x82\x02\x20\x08\x40\x11\x01\x08\x08\x20\x80\x88" +
	"\x04\x40\x14\x00\x40\x02\x00\x10\x00\x80\x04\x00\x20\x01\x00\x7f" +
	"\xe0\x01\x00\x10\x01\x00\x08\x00\x80\x08\x00\x80\x08\x00\x80\x04" +
	"\x00\x40\x04\x00\x3f\xf0\x0f\x80\x82\x08\x08\x40\x42\x02\x10\x10" +
	"\x80\x84\x04\x20\x21\x01\x08\x08\x40\x41\x04\x07\xc0\x02\x00\x30" +
	"\x02\x80\x04\x00\x20\x01\x00\x08\x00\x40\x02\x00\x10\x00\x80\x04" +
	"\x00\x20\x01\x00\x0f\x00\x84\x08\x10\x40\x80\x04\x00\x20\x02\x00" +
	"\x20\x02\x00\x20\x02\x00\x20\x02\x00\x1f\xe0\x0f\x00\x84\x08\x10" +
	"\x40\x80\x04\x00\x40\x1c\x00\x10\x00\x40\x02\x08\x10\x40\x81\x08" +
	"\x07\x80\x01\x00\x18\x00\xc0\x0a\x00\x90\x04\x80\x44\x04\x20\x21" +
	"\x02\x08\x1f\xf8\x02\x00\x10\x00\x80\x1f\x81\x00\x08\x00\x40\x02" +
	"\x00\x17\x80\xc2\x04\x08\x00\x40\x02\x08\x10\x40\x81\x08\x07\x80" +
	"\x0f\x00\x84\x08\x10\x40\x82\x00\x10\x00\xbc\x06\x10\x20\x41\x02" +
	"\x08\x10\x40\x81\x08\x07\x80\x3f\xc0\x02\x00\x20\x01\x00\x10\x00" +
	"\x80\x04\x00\x40\x02\x00\x10\x01\x00\x08\x00\x40\x02\x00\x0f\x00" +
	"\x84\x08\x10\x40\x82\x04\x08\x40\x3c\x02\x10\x20\x41\x02\x08\x10" +
	"\x40\x81\x08\x07\x80\x0f\x00\x84\x08\x10\x40\x82\x04\x10\x20\x43" +
	"\x01\xe8\x00\x40\x02\x08\x10\x40\x81\x08\x07\x80\x02\x00\x10\x00" +
	"\x80\x04\x00\x20\x01\x00\x08\x00\x40\x02\x00\x10\x00\x00\x00\x00" +
	"\x20\x01\x00\xd8\x06\xc0\x12\x01\x20\x00\x00\x00\x00\x00\x00\x00" +
	"\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x04\x40\x22\x01\x10\x08" +
	"\x87\xff\x04\x40\x22\x01\x10\x08\x83\xff\x84\x40\x22\x01\x10\x08" +
	"\x80\xc0\x06\x00\x10\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" +
	"\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x80\x44\x41\x24" +
	"\x05\x40\x1c\x00\x40\x07\x00\x54\x04\x90\x44\x40\x20\x00\x00\x00" +
	"\x00\x00\x00\x80\x04\x00\x20\x01\x00\x08\x0f\xfe\x02\x00\x10\x00" +
	"\x80\x04\x00\x20\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" +
	"\x00\x00\x00\x00\x00\x00\x30\x01\x80\x04\x00\x40\x00\x00\x00\x00" +
	"\x00\x00\x00\x00\x00\x00\x00\x00\x0f\xfe\x00\x00\x00\x00\x00\x00" +
	"\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" +
	"\x00\x00\x00\x00\x30\x01\x80\x00\x00\x00\x00\x00\x00\x00\x40\x04" +
	"\x00\x40\x04\x00\x40\x04\x00\x40\x04\x00\x40\x04\x00\x40\x04\x00" +
	"\x40\x00\x00\x00\x00\x00\x00\x0c\x00\x60\x00\x00\x00\x00\x00\x00" +
	"\x00\x00\x01\x80\x0c\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" +
	"\x00\x3f\xf8\x00\x00\x00\x00\x03\xff\x80\x00\x00\x00\x00\x00\x00" +
	"\x07\x00\x44\x04\x10\x20\x80\x04\x00\x40\x04\x00\x40\x02\x00\x10" +
	"\x00\x00\x00\x00\x20\x01\x00\x07\x00\xc6\x08\x08\x80\x24\x31\x42" +
	"\x4a\x22\x51\x22\x89\x22\x36\x10\x02\x40\x21\x86\x03\xc0\x00\x00" +
	"\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
